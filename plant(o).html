<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Plant Detector - AI Plant Identification</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      :root {
        --primary: #2ecc71;
        --primary-dark: #27ae60;
        --secondary: #3498db;
        --danger: #e74c3c;
        --dark: #2c3e50;
        --light: #ecf0f1;
        --white: #ffffff;
        --shadow: rgba(0, 0, 0, 0.1);
      }

      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        min-height: 100vh;
        display: flex;
        justify-content: center;
        align-items: center;
      }

      .container {
        width: 100%;
        max-width: 450px;
        padding: 20px;
      }

      .card {
        background: var(--white);
        border-radius: 20px;
        padding: 40px;
        box-shadow: 0 20px 60px var(--shadow);
        animation: slideUp 0.5s ease;
      }

      @keyframes slideUp {
        from {
          opacity: 0;
          transform: translateY(30px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .logo {
        text-align: center;
        margin-bottom: 30px;
      }

      .logo h1 {
        color: var(--primary);
        font-size: 32px;
        font-weight: bold;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 10px;
      }

      .logo-icon {
        width: 50px;
        height: 50px;
        background: var(--primary);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 28px;
      }

      .form-group {
        margin-bottom: 20px;
      }

      label {
        display: block;
        margin-bottom: 8px;
        color: var(--dark);
        font-weight: 500;
      }

      input,
      select {
        width: 100%;
        padding: 12px 15px;
        border: 2px solid var(--light);
        border-radius: 10px;
        font-size: 15px;
        transition: all 0.3s;
      }

      input:focus,
      select:focus {
        outline: none;
        border-color: var(--primary);
      }

      .password-wrapper {
        position: relative;
      }

      .toggle-password {
        position: absolute;
        right: 15px;
        top: 50%;
        transform: translateY(-50%);
        cursor: pointer;
        font-size: 20px;
        color: #95a5a6;
        user-select: none;
      }

      .forgot-password {
        text-align: right;
        margin-top: 10px;
      }

      .forgot-password a {
        color: var(--secondary);
        text-decoration: none;
        font-size: 14px;
      }

      .forgot-password a:hover {
        text-decoration: underline;
      }

      .btn {
        width: 100%;
        padding: 14px;
        border: none;
        border-radius: 10px;
        font-size: 16px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s;
        margin-top: 10px;
      }

      .btn-primary {
        background: var(--primary);
        color: var(--white);
      }

      .btn-primary:hover {
        background: var(--primary-dark);
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(46, 204, 113, 0.3);
      }

      .btn-secondary {
        background: var(--secondary);
        color: var(--white);
      }

      .btn-secondary:hover {
        background: #2980b9;
      }

      .btn-danger {
        background: var(--danger);
        color: var(--white);
      }

      .divider {
        text-align: center;
        margin: 25px 0;
        color: #7f8c8d;
        position: relative;
      }

      .divider::before,
      .divider::after {
        content: "";
        position: absolute;
        top: 50%;
        width: 40%;
        height: 1px;
        background: var(--light);
      }

      .divider::before {
        left: 0;
      }

      .divider::after {
        right: 0;
      }

      .hidden {
        display: none;
      }

      .app-container {
        max-width: 1200px;
        width: 100%;
        padding: 20px;
      }

      .navbar {
        background: var(--white);
        padding: 15px 30px;
        border-radius: 15px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        box-shadow: 0 5px 20px var(--shadow);
        margin-bottom: 30px;
        flex-wrap: wrap;
        gap: 15px;
      }

      .nav-links {
        display: flex;
        gap: 10px;
        flex-wrap: wrap;
      }

      .nav-link {
        padding: 10px 20px;
        background: transparent;
        border: none;
        cursor: pointer;
        font-size: 15px;
        font-weight: 500;
        color: var(--dark);
        border-radius: 8px;
        transition: all 0.3s;
      }

      .nav-link:hover,
      .nav-link.active {
        background: var(--primary);
        color: var(--white);
      }

      .content-area {
        background: var(--white);
        border-radius: 15px;
        padding: 40px;
        box-shadow: 0 5px 20px var(--shadow);
        min-height: 500px;
      }

      .upload-section {
        text-align: center;
        padding: 40px 20px;
      }

      .upload-box {
        border: 3px dashed var(--primary);
        border-radius: 15px;
        padding: 60px 40px;
        cursor: pointer;
        transition: all 0.3s;
        margin-bottom: 30px;
      }

      .upload-box:hover {
        background: #f0fdf4;
        border-color: var(--primary-dark);
      }

      .upload-icon {
        font-size: 60px;
        color: var(--primary);
        margin-bottom: 20px;
      }

      .image-preview {
        max-width: 100%;
        max-height: 300px;
        margin: 20px auto;
        border-radius: 10px;
        display: none;
      }

      .loader {
        display: none;
        justify-content: center;
        align-items: center;
        margin: 30px 0;
      }

      .rotating-leaf {
        width: 80px;
        height: 80px;
        animation: rotate 2s linear infinite;
      }

      @keyframes rotate {
        from {
          transform: rotate(0deg);
        }
        to {
          transform: rotate(360deg);
        }
      }

      .result-box {
        background: #f8f9fa;
        border-radius: 15px;
        padding: 30px;
        margin-top: 30px;
        display: none;
        text-align: left;
      }

      .result-box h3 {
        color: var(--primary);
        margin-bottom: 15px;
      }

      .result-box p {
        margin: 10px 0;
        line-height: 1.6;
      }

      .account-details {
        display: grid;
        gap: 20px;
      }

      .detail-row {
        display: flex;
        justify-content: space-between;
        padding: 15px;
        background: var(--light);
        border-radius: 10px;
        align-items: center;
      }

      .detail-label {
        font-weight: 600;
        color: var(--dark);
      }

      .history-item {
        background: var(--light);
        padding: 20px;
        border-radius: 10px;
        margin-bottom: 15px;
        display: flex;
        gap: 20px;
        align-items: center;
      }

      .history-image {
        width: 80px;
        height: 80px;
        object-fit: cover;
        border-radius: 8px;
      }

      .settings-option {
        padding: 20px;
        background: var(--light);
        border-radius: 10px;
        margin-bottom: 15px;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .switch {
        position: relative;
        width: 60px;
        height: 30px;
      }

      .switch input {
        opacity: 0;
        width: 0;
        height: 0;
      }

      .slider {
        position: absolute;
        cursor: pointer;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background-color: #ccc;
        transition: 0.4s;
        border-radius: 34px;
      }

      .slider:before {
        position: absolute;
        content: "";
        height: 22px;
        width: 22px;
        left: 4px;
        bottom: 4px;
        background-color: white;
        transition: 0.4s;
        border-radius: 50%;
      }

      input:checked + .slider {
        background-color: var(--primary);
      }

      input:checked + .slider:before {
        transform: translateX(30px);
      }

      .stats {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 20px;
        margin-bottom: 30px;
      }

      .stat-card {
        background: linear-gradient(
          135deg,
          var(--primary),
          var(--primary-dark)
        );
        color: var(--white);
        padding: 25px;
        border-radius: 15px;
        text-align: center;
      }

      .stat-number {
        font-size: 36px;
        font-weight: bold;
        margin-bottom: 10px;
      }

      @media (max-width: 768px) {
        .navbar {
          flex-direction: column;
        }

        .nav-links {
          width: 100%;
          justify-content: center;
        }

        .content-area {
          padding: 20px;
        }

        .upload-box {
          padding: 40px 20px;
        }
      }
    </style>
  </head>
  <body>
    <!-- Login Page -->
    <div id="loginPage" class="container">
      <div class="card">
        <div class="logo">
          <h1>
            <div class="logo-icon">ЁЯМ┐</div>
            <span data-lang="appName">PlantDetect</span>
          </h1>
        </div>
        <form id="loginForm">
          <div class="form-group">
            <label for="loginEmail" data-lang="emailLabel">Email Address</label>
            <input
              type="email"
              id="loginEmail"
              required
              data-lang-placeholder="emailPlaceholder"
            />
          </div>
          <div class="form-group">
            <label for="loginPassword" data-lang="passwordLabel"
              >Password</label
            >
            <div class="password-wrapper">
              <input
                type="password"
                id="loginPassword"
                required
                data-lang-placeholder="passwordPlaceholder"
              />
              <span
                class="toggle-password"
                onclick="togglePassword('loginPassword')"
                >ЁЯСБя╕П</span
              >
            </div>
            <div class="forgot-password">
              <a
                href="#"
                onclick="showForgotPassword(); return false;"
                data-lang="forgotPassword"
                >Forgot Password?</a
              >
            </div>
          </div>
          <button type="submit" class="btn btn-primary" data-lang="loginBtn">
            Login
          </button>
          <div class="divider" data-lang="or">OR</div>
          <button
            type="button"
            class="btn btn-secondary"
            onclick="showRegister()"
            data-lang="registerBtn"
          >
            Register New Account
          </button>
        </form>
      </div>
    </div>

    <!-- Register Page -->
    <div id="registerPage" class="container hidden">
      <div class="card">
        <div class="logo">
          <h1>
            <div class="logo-icon">ЁЯМ┐</div>
            <span data-lang="registerTitle">Register</span>
          </h1>
        </div>
        <form id="registerForm">
          <div class="form-group">
            <label for="registerName" data-lang="nameLabel">Full Name</label>
            <input
              type="text"
              id="registerName"
              required
              data-lang-placeholder="namePlaceholder"
            />
          </div>
          <div class="form-group">
            <label for="registerEmail" data-lang="emailLabel"
              >Email Address</label
            >
            <input
              type="email"
              id="registerEmail"
              required
              data-lang-placeholder="emailPlaceholder"
            />
          </div>
          <div class="form-group">
            <label for="registerPassword" data-lang="passwordLabel"
              >Password</label
            >
            <div class="password-wrapper">
              <input
                type="password"
                id="registerPassword"
                required
                data-lang-placeholder="createPasswordPlaceholder"
              />
              <span
                class="toggle-password"
                onclick="togglePassword('registerPassword')"
                >ЁЯСБя╕П</span
              >
            </div>
          </div>
          <div class="form-group">
            <label
              for="registerConfirmPassword"
              data-lang="confirmPasswordLabel"
              >Confirm Password</label
            >
            <div class="password-wrapper">
              <input
                type="password"
                id="registerConfirmPassword"
                required
                data-lang-placeholder="confirmPasswordPlaceholder"
              />
              <span
                class="toggle-password"
                onclick="togglePassword('registerConfirmPassword')"
                >ЁЯСБя╕П</span
              >
            </div>
          </div>
          <button
            type="submit"
            class="btn btn-primary"
            data-lang="registerSubmitBtn"
          >
            Register
          </button>
          <button
            type="button"
            class="btn btn-secondary"
            onclick="showLogin()"
            data-lang="backToLogin"
          >
            Back to Login
          </button>
        </form>
      </div>
    </div>

    <!-- Forgot Password Page -->
    <div id="forgotPasswordPage" class="container hidden">
      <div class="card">
        <div class="logo">
          <h1>
            <div class="logo-icon">ЁЯМ┐</div>
            <span data-lang="resetPasswordTitle">Reset Password</span>
          </h1>
        </div>
        <form id="forgotPasswordForm">
          <p
            style="text-align: center; margin-bottom: 20px; color: #7f8c8d"
            data-lang="resetPasswordDesc"
          >
            Enter your email to receive verification code
          </p>
          <div class="form-group">
            <label for="forgotEmail" data-lang="emailLabel"
              >Email Address</label
            >
            <input
              type="email"
              id="forgotEmail"
              required
              data-lang-placeholder="emailPlaceholder"
            />
          </div>
          <button type="submit" class="btn btn-primary" data-lang="sendCodeBtn">
            Send Verification Code
          </button>
          <button
            type="button"
            class="btn btn-secondary"
            onclick="showLogin()"
            data-lang="backToLogin"
          >
            Back to Login
          </button>
        </form>
      </div>
    </div>

    <!-- Home Page -->
    <div id="homePage" class="app-container hidden">
      <nav class="navbar">
        <div class="logo">
          <h1 style="font-size: 24px; margin: 0">
            ЁЯМ┐ <span data-lang="appName">PlantDetect</span>
          </h1>
        </div>
        <div class="nav-links">
          <button
            class="nav-link active"
            onclick="showSection('home')"
            data-lang="navHome"
          >
            Home
          </button>
          <button
            class="nav-link"
            onclick="showSection('dashboard')"
            data-lang="navDashboard"
          >
            Dashboard
          </button>
          <button
            class="nav-link"
            onclick="showSection('history')"
            data-lang="navHistory"
          >
            History
          </button>
          <button
            class="nav-link"
            onclick="showSection('settings')"
            data-lang="navSettings"
          >
            Settings
          </button>
          <button class="nav-link" onclick="logout()" data-lang="navLogout">
            Logout
          </button>
        </div>
      </nav>

      <!-- Home Section -->
      <div id="homeSection" class="content-area">
        <div class="stats">
          <div class="stat-card">
            <div class="stat-number" id="imageCount">0</div>
            <div data-lang="imagesUploaded">Images Uploaded</div>
          </div>
        </div>

        <div class="upload-section">
          <h2
            style="color: var(--dark); margin-bottom: 30px"
            data-lang="uploadTitle"
          >
            Upload Plant Image for Detection
          </h2>
          <div
            class="upload-box"
            onclick="document.getElementById('fileInput').click()"
          >
            <div class="upload-icon">ЁЯУ╖</div>
            <h3 data-lang="uploadBoxTitle">Click or Drop Image Here</h3>
            <p
              style="color: #7f8c8d; margin-top: 10px"
              data-lang="uploadBoxDesc"
            >
              Supports JPG, PNG formats
            </p>
          </div>
          <input
            type="file"
            id="fileInput"
            accept="image/*"
            style="display: none"
            onchange="handleFileSelect(event)"
          />

          <img id="imagePreview" class="image-preview" alt="Preview" />

          <button
            id="analyzeBtn"
            class="btn btn-primary"
            style="max-width: 300px; margin: 0 auto; display: none"
            onclick="analyzePlant()"
            data-lang="analyzeBtn"
          >
            Analyze Plant
          </button>

          <div class="loader" id="loader">
            <svg class="rotating-leaf" viewBox="0 0 100 100">
              <path
                d="M50,10 Q70,30 70,50 Q70,70 50,90 Q30,70 30,50 Q30,30 50,10"
                fill="#2ecc71"
              />
            </svg>
          </div>

          <div class="result-box" id="resultBox">
            <h3 data-lang="resultTitle">Analysis Result</h3>
            <div id="resultContent">
              <p>
                <strong data-lang="plantNameLabel">Plant Name:</strong>
                <span id="plantName">-</span>
              </p>
              <p>
                <strong data-lang="scientificNameLabel"
                  >Scientific Name:</strong
                >
                <span id="scientificName">-</span>
              </p>
              <p>
                <strong data-lang="confidenceLabel">Confidence:</strong>
                <span id="confidence">-</span>
              </p>
              <p>
                <strong data-lang="descriptionLabel">Description:</strong>
                <span id="description">-</span>
              </p>
            </div>
          </div>
        </div>
      </div>

      <!-- Dashboard Section -->
      <div id="dashboardSection" class="content-area hidden">
        <h2 style="margin-bottom: 30px" data-lang="myAccount">My Account</h2>
        <div class="account-details">
          <div class="detail-row">
            <span class="detail-label" data-lang="nameLabel">Name:</span>
            <span id="accountName">John Doe</span>
          </div>
          <div class="detail-row">
            <span class="detail-label" data-lang="phoneLabel">Phone:</span>
            <input
              type="tel"
              id="accountPhone"
              placeholder="+1234567890"
              style="
                border: none;
                background: transparent;
                text-align: right;
                width: auto;
              "
            />
          </div>
          <div class="detail-row">
            <span class="detail-label" data-lang="emailLabel">Email:</span>
            <span id="accountEmail">user@example.com</span>
          </div>
          <div class="detail-row">
            <span class="detail-label" data-lang="dobLabel"
              >Date of Birth:</span
            >
            <input
              type="date"
              id="accountDob"
              style="
                border: none;
                background: transparent;
                text-align: right;
                width: auto;
              "
            />
          </div>
          <div class="detail-row">
            <span class="detail-label" data-lang="dateJoinedLabel"
              >Date Joined:</span
            >
            <span id="dateJoined">January 1, 2024</span>
          </div>
        </div>
        <button
          class="btn btn-primary"
          style="margin-top: 20px; max-width: 200px"
          onclick="saveAccountDetails()"
          data-lang="saveChangesBtn"
        >
          Save Changes
        </button>
        <button
          class="btn btn-danger"
          style="margin-top: 20px; max-width: 200px"
          onclick="deleteAccount()"
          data-lang="deleteAccountBtn"
        >
          Delete Account
        </button>
      </div>

      <!-- History Section -->
      <div id="historySection" class="content-area hidden">
        <h2 style="margin-bottom: 30px" data-lang="historyTitle">
          Analysis History
        </h2>
        <div id="historyList">
          <p style="text-align: center; color: #7f8c8d" data-lang="noHistory">
            No history available. Start analyzing plants!
          </p>
        </div>
      </div>

      <!-- Settings Section -->
      <div id="settingsSection" class="content-area hidden">
        <h2 style="margin-bottom: 30px" data-lang="settingsTitle">Settings</h2>
        <div class="settings-option">
          <div>
            <strong data-lang="notificationsLabel">Notifications</strong>
            <p
              style="color: #7f8c8d; font-size: 14px; margin-top: 5px"
              data-lang="notificationsDesc"
            >
              Receive updates and alerts
            </p>
          </div>
          <label class="switch">
            <input
              type="checkbox"
              id="notificationToggle"
              checked
              onchange="saveSettings()"
            />
            <span class="slider"></span>
          </label>
        </div>
        <div class="settings-option">
          <div>
            <strong data-lang="languageLabel">Language</strong>
            <p
              style="color: #7f8c8d; font-size: 14px; margin-top: 5px"
              data-lang="languageDesc"
            >
              Choose your preferred language
            </p>
          </div>
          <select id="languageSelect" onchange="changeLanguage()">
            <option value="en">English</option>
            <option value="ta">родрооро┐ро┤рпН (Tamil)</option>
            <option value="hi">рд╣рд┐рдВрджреА (Hindi)</option>
          </select>
        </div>
      </div>
    </div>

    <script>
      // Multi-language translations
      const translations = {
        en: {
          appName: "PlantDetect",
          emailLabel: "Email Address",
          emailPlaceholder: "Enter your email",
          passwordLabel: "Password",
          passwordPlaceholder: "Enter your password",
          forgotPassword: "Forgot Password?",
          loginBtn: "Login",
          or: "OR",
          registerBtn: "Register New Account",
          registerTitle: "Register",
          nameLabel: "Full Name",
          namePlaceholder: "Enter your name",
          createPasswordPlaceholder: "Create password",
          confirmPasswordLabel: "Confirm Password",
          confirmPasswordPlaceholder: "Confirm password",
          registerSubmitBtn: "Register",
          backToLogin: "Back to Login",
          resetPasswordTitle: "Reset Password",
          resetPasswordDesc: "Enter your email to receive verification code",
          sendCodeBtn: "Send Verification Code",
          navHome: "Home",
          navDashboard: "Dashboard",
          navHistory: "History",
          navSettings: "Settings",
          navLogout: "Logout",
          imagesUploaded: "Images Uploaded",
          uploadTitle: "Upload Plant Image for Detection",
          uploadBoxTitle: "Click or Drop Image Here",
          uploadBoxDesc: "Supports JPG, PNG formats",
          analyzeBtn: "Analyze Plant",
          resultTitle: "Analysis Result",
          plantNameLabel: "Plant Name:",
          scientificNameLabel: "Scientific Name:",
          confidenceLabel: "Confidence:",
          descriptionLabel: "Description:",
          myAccount: "My Account",
          phoneLabel: "Phone:",
          dobLabel: "Date of Birth:",
          dateJoinedLabel: "Date Joined:",
          saveChangesBtn: "Save Changes",
          deleteAccountBtn: "Delete Account",
          historyTitle: "Analysis History",
          noHistory: "No history available. Start analyzing plants!",
          settingsTitle: "Settings",
          notificationsLabel: "Notifications",
          notificationsDesc: "Receive updates and alerts",
          languageLabel: "Language",
          languageDesc: "Choose your preferred language",
          passwordMismatch: "Passwords do not match!",
          emailExists: "Email already registered!",
          registrationSuccess: "Registration successful! Please login.",
          invalidCredentials: "Invalid email or password!",
          verificationSent: "Verification code sent to",
          emailNotFound: "Email not found!",
          accountSaved: "Account details saved successfully!",
          deleteConfirm:
            "Are you sure you want to delete your account? This action cannot be undone.",
          accountDeleted: "Account deleted successfully!",
        },
        ta: {
          appName: "родро╛ро╡ро░ роХрогрпНроЯро▒ро┐родро▓рпН",
          emailLabel: "рооро┐ройрпНройроЮрпНроЪро▓рпН роорпБроХро╡ро░ро┐",
          emailPlaceholder: "роЙроЩрпНроХро│рпН рооро┐ройрпНройроЮрпНроЪро▓рпИ роЙро│рпНро│ро┐роЯро╡рпБроорпН",
          passwordLabel: "роХроЯро╡рпБроЪрпНроЪрпКро▓рпН",
          passwordPlaceholder: "роЙроЩрпНроХро│рпН роХроЯро╡рпБроЪрпНроЪрпКро▓рпНро▓рпИ роЙро│рпНро│ро┐роЯро╡рпБроорпН",
          forgotPassword: "роХроЯро╡рпБроЪрпНроЪрпКро▓рпНро▓рпИ рооро▒роирпНродрпБро╡ро┐роЯрпНроЯрпАро░рпНроХро│ро╛?",
          loginBtn: "роЙро│рпНроирпБро┤рпИ",
          or: "роЕро▓рпНро▓родрпБ",
          registerBtn: "рокрпБродро┐роп роХрогроХрпНроХрпИ рокродро┐ро╡рпБ роЪрпЖропрпНропро╡рпБроорпН",
          registerTitle: "рокродро┐ро╡рпБ",
          nameLabel: "роорпБро┤рпБ рокрпЖропро░рпН",
          namePlaceholder: "роЙроЩрпНроХро│рпН рокрпЖропро░рпИ роЙро│рпНро│ро┐роЯро╡рпБроорпН",
          createPasswordPlaceholder: "роХроЯро╡рпБроЪрпНроЪрпКро▓рпНро▓рпИ роЙро░рпБро╡ро╛роХрпНроХро╡рпБроорпН",
          confirmPasswordLabel: "роХроЯро╡рпБроЪрпНроЪрпКро▓рпНро▓рпИ роЙро▒рпБродро┐рокрпНрокроЯрпБродрпНродро╡рпБроорпН",
          confirmPasswordPlaceholder: "роХроЯро╡рпБроЪрпНроЪрпКро▓рпНро▓рпИ роЙро▒рпБродро┐рокрпНрокроЯрпБродрпНродро╡рпБроорпН",
          registerSubmitBtn: "рокродро┐ро╡рпБ роЪрпЖропрпН",
          backToLogin: "роЙро│рпНроирпБро┤рпИро╡рпБроХрпНроХрпБ родро┐ро░рпБроорпНрокрпБ",
          resetPasswordTitle: "роХроЯро╡рпБроЪрпНроЪрпКро▓рпНро▓рпИ роорпАроЯрпНроЯроорпИ",
          resetPasswordDesc:
            "роЪро░ро┐рокро╛ро░рпНрокрпНрокрпБ роХрпБро▒ро┐ропрпАроЯрпНроЯрпИрокрпН рокрпЖро▒ роЙроЩрпНроХро│рпН рооро┐ройрпНройроЮрпНроЪро▓рпИ роЙро│рпНро│ро┐роЯро╡рпБроорпН",
          sendCodeBtn: "роЪро░ро┐рокро╛ро░рпНрокрпНрокрпБ роХрпБро▒ро┐ропрпАроЯрпНроЯрпИ роЕройрпБрокрпНрокро╡рпБроорпН",
          navHome: "роорпБроХрокрпНрокрпБ",
          navDashboard: "роХроЯрпНроЯрпБрокрпНрокро╛роЯрпНроЯрпБ рокро▓роХрпИ",
          navHistory: "ро╡ро░ро▓ро╛ро▒рпБ",
          navSettings: "роЕроорпИрокрпНрокрпБроХро│рпН",
          navLogout: "ро╡рпЖро│ро┐ропрпЗро▒рпБ",
          imagesUploaded: "рокроЯроЩрпНроХро│рпН рокродро┐ро╡рпЗро▒рпНро▒рокрпНрокроЯрпНроЯрой",
          uploadTitle: "роХрогрпНроЯро▒ро┐родро▓рпБроХрпНроХрпБ родро╛ро╡ро░ рокроЯродрпНродрпИ рокродро┐ро╡рпЗро▒рпНро▒ро╡рпБроорпН",
          uploadBoxTitle: "роЗроЩрпНроХрпЗ роХро┐ро│ро┐роХрпН роЪрпЖропрпНропро╡рпБроорпН роЕро▓рпНро▓родрпБ рокроЯродрпНродрпИ роЗро┤рпБроХрпНроХро╡рпБроорпН",
          uploadBoxDesc: "JPG, PNG ро╡роЯро┐ро╡роЩрпНроХро│рпИ роЖродро░ро┐роХрпНроХро┐ро▒родрпБ",
          analyzeBtn: "родро╛ро╡ро░родрпНродрпИ рокроХрпБрокрпНрокро╛ропрпНро╡рпБ роЪрпЖропрпН",
          resultTitle: "рокроХрпБрокрпНрокро╛ропрпНро╡рпБ роорпБроЯро┐ро╡рпБ",
          plantNameLabel: "родро╛ро╡ро░ рокрпЖропро░рпН:",
          scientificNameLabel: "роЕро▒ро┐ро╡ро┐ропро▓рпН рокрпЖропро░рпН:",
          confidenceLabel: "роироорпНрокро┐роХрпНроХрпИ:",
          descriptionLabel: "ро╡ро┐ро│роХрпНроХроорпН:",
          myAccount: "роОройродрпБ роХрогроХрпНроХрпБ",
          phoneLabel: "родрпКро▓рпИрокрпЗроЪро┐:",
          dobLabel: "рокро┐ро▒роирпНрод родрпЗродро┐:",
          dateJoinedLabel: "роЪрпЗро░рпНроирпНрод родрпЗродро┐:",
          saveChangesBtn: "рооро╛ро▒рпНро▒роЩрпНроХро│рпИроЪрпН роЪрпЗрооро┐",
          deleteAccountBtn: "роХрогроХрпНроХрпИ роирпАроХрпНроХрпБ",
          historyTitle: "рокроХрпБрокрпНрокро╛ропрпНро╡рпБ ро╡ро░ро▓ро╛ро▒рпБ",
          noHistory:
            "ро╡ро░ро▓ро╛ро▒рпБ роЗро▓рпНро▓рпИ. родро╛ро╡ро░роЩрпНроХро│рпИ рокроХрпБрокрпНрокро╛ропрпНро╡рпБ роЪрпЖропрпНропродрпН родрпКроЯроЩрпНроХрпБроЩрпНроХро│рпН!",
          settingsTitle: "роЕроорпИрокрпНрокрпБроХро│рпН",
          notificationsLabel: "роЕро▒ро┐ро╡ро┐рокрпНрокрпБроХро│рпН",
          notificationsDesc: "рокрпБродрпБрокрпНрокро┐рокрпНрокрпБроХро│рпН рооро▒рпНро▒рпБроорпН роОроЪрпНроЪро░ро┐роХрпНроХрпИроХро│рпИрокрпН рокрпЖро▒ро╡рпБроорпН",
          languageLabel: "роорпКро┤ро┐",
          languageDesc: "роЙроЩрпНроХро│рпБроХрпНроХрпБ ро╡ро┐ро░рпБрокрпНрокрооро╛рой роорпКро┤ро┐ропрпИродрпН родрпЗро░рпНроирпНродрпЖроЯрпБроХрпНроХро╡рпБроорпН",
          passwordMismatch: "роХроЯро╡рпБроЪрпНроЪрпКро▒рпНроХро│рпН рокрпКро░рпБроирпНродро╡ро┐ро▓рпНро▓рпИ!",
          emailExists: "рооро┐ройрпНройроЮрпНроЪро▓рпН роПро▒рпНроХройро╡рпЗ рокродро┐ро╡рпБ роЪрпЖропрпНропрокрпНрокроЯрпНроЯрпБро│рпНро│родрпБ!",
          registrationSuccess: "рокродро┐ро╡рпБ ро╡рпЖро▒рпНро▒ро┐роХро░рооро╛роХ роорпБроЯро┐роирпНродродрпБ! роЙро│рпНроирпБро┤рпИропро╡рпБроорпН.",
          invalidCredentials: "родро╡ро▒ро╛рой рооро┐ройрпНройроЮрпНроЪро▓рпН роЕро▓рпНро▓родрпБ роХроЯро╡рпБроЪрпНроЪрпКро▓рпН!",
          verificationSent: "роЪро░ро┐рокро╛ро░рпНрокрпНрокрпБ роХрпБро▒ро┐ропрпАроЯрпБ роЕройрпБрокрпНрокрокрпНрокроЯрпНроЯродрпБ",
          emailNotFound: "рооро┐ройрпНройроЮрпНроЪро▓рпН роХро┐роЯрпИроХрпНроХро╡ро┐ро▓рпНро▓рпИ!",
          accountSaved: "роХрогроХрпНроХрпБ ро╡ро┐ро╡ро░роЩрпНроХро│рпН ро╡рпЖро▒рпНро▒ро┐роХро░рооро╛роХроЪрпН роЪрпЗрооро┐роХрпНроХрокрпНрокроЯрпНроЯрой!",
          deleteConfirm:
            "роЙроЩрпНроХро│рпН роХрогроХрпНроХрпИ роирпАроХрпНроХ ро╡ро┐ро░рпБроорпНрокрпБроХро┐ро▒рпАро░рпНроХро│ро╛? роЗроирпНрод роЪрпЖропро▓рпИ роЪрпЖропро▓рпНродро╡ро┐ро░рпНроХрпНроХ роорпБроЯро┐ропро╛родрпБ.",
          accountDeleted: "роХрогроХрпНроХрпБ ро╡рпЖро▒рпНро▒ро┐роХро░рооро╛роХ роирпАроХрпНроХрокрпНрокроЯрпНроЯродрпБ!",
        },
        hi: {
          appName: "рдкреМрдзрд╛ рдкрд╣рдЪрд╛рди",
          emailLabel: "рдИрдореЗрд▓ рдкрддрд╛",
          emailPlaceholder: "рдЕрдкрдирд╛ рдИрдореЗрд▓ рджрд░реНрдЬ рдХрд░реЗрдВ",
          passwordLabel: "рдкрд╛рд╕рд╡рд░реНрдб",
          passwordPlaceholder: "рдЕрдкрдирд╛ рдкрд╛рд╕рд╡рд░реНрдб рджрд░реНрдЬ рдХрд░реЗрдВ",
          forgotPassword: "рдкрд╛рд╕рд╡рд░реНрдб рднреВрд▓ рдЧрдП?",
          loginBtn: "рд▓реЙрдЧрд┐рди",
          or: "рдпрд╛",
          registerBtn: "рдирдпрд╛ рдЦрд╛рддрд╛ рдкрдВрдЬреАрдХреГрдд рдХрд░реЗрдВ",
          registerTitle: "рдкрдВрдЬреАрдХрд░рдг",
          nameLabel: "рдкреВрд░рд╛ рдирд╛рдо",
          namePlaceholder: "рдЕрдкрдирд╛ рдирд╛рдо рджрд░реНрдЬ рдХрд░реЗрдВ",
          createPasswordPlaceholder: "рдкрд╛рд╕рд╡рд░реНрдб рдмрдирд╛рдПрдВ",
          confirmPasswordLabel: "рдкрд╛рд╕рд╡рд░реНрдб рдХреА рдкреБрд╖реНрдЯрд┐ рдХрд░реЗрдВ",
          confirmPasswordPlaceholder: "рдкрд╛рд╕рд╡рд░реНрдб рдХреА рдкреБрд╖реНрдЯрд┐ рдХрд░реЗрдВ",
          registerSubmitBtn: "рдкрдВрдЬреАрдХрд░рдг рдХрд░реЗрдВ",
          backToLogin: "рд▓реЙрдЧрд┐рди рдкрд░ рд╡рд╛рдкрд╕ рдЬрд╛рдПрдВ",
          resetPasswordTitle: "рдкрд╛рд╕рд╡рд░реНрдб рд░реАрд╕реЗрдЯ рдХрд░реЗрдВ",
          resetPasswordDesc:
            "рд╕рддреНрдпрд╛рдкрди рдХреЛрдб рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЕрдкрдирд╛ рдИрдореЗрд▓ рджрд░реНрдЬ рдХрд░реЗрдВ",
          sendCodeBtn: "рд╕рддреНрдпрд╛рдкрди рдХреЛрдб рднреЗрдЬреЗрдВ",
          navHome: "рд╣реЛрдо",
          navDashboard: "рдбреИрд╢рдмреЛрд░реНрдб",
          navHistory: "рдЗрддрд┐рд╣рд╛рд╕",
          navSettings: "рд╕реЗрдЯрд┐рдВрдЧреНрд╕",
          navLogout: "рд▓реЙрдЧрдЖрдЙрдЯ",
          imagesUploaded: "рдЫрд╡рд┐рдпрд╛рдВ рдЕрдкрд▓реЛрдб рдХреА рдЧрдИрдВ",
          uploadTitle: "рдкрд╣рдЪрд╛рди рдХреЗ рд▓рд┐рдП рдкреМрдзреЗ рдХреА рдЫрд╡рд┐ рдЕрдкрд▓реЛрдб рдХрд░реЗрдВ",
          uploadBoxTitle: "рдпрд╣рд╛рдВ рдХреНрд▓рд┐рдХ рдХрд░реЗрдВ рдпрд╛ рдЫрд╡рд┐ рдХреЛ рдЦреАрдВрдЪреЗрдВ",
          uploadBoxDesc: "JPG, PNG рдкреНрд░рд╛рд░реВрдкреЛрдВ рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рддрд╛ рд╣реИ",
          analyzeBtn: "рдкреМрдзреЗ рдХрд╛ рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдХрд░реЗрдВ",
          resultTitle: "рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдкрд░рд┐рдгрд╛рдо",
          plantNameLabel: "рдкреМрдзреЗ рдХрд╛ рдирд╛рдо:",
          scientificNameLabel: "рд╡реИрдЬреНрдЮрд╛рдирд┐рдХ рдирд╛рдо:",
          confidenceLabel: "рд╡рд┐рд╢реНрд╡рд╛рд╕:",
          descriptionLabel: "рд╡рд┐рд╡рд░рдг:",
          myAccount: "рдореЗрд░рд╛ рдЦрд╛рддрд╛",
          phoneLabel: "рдлреЛрди:",
          dobLabel: "рдЬрдиреНрдо рддрд┐рдерд┐:",
          dateJoinedLabel: "рд╢рд╛рдорд┐рд▓ рд╣реЛрдиреЗ рдХреА рддрд┐рдерд┐:",
          saveChangesBtn: "рдкрд░рд┐рд╡рд░реНрддрди рд╕рд╣реЗрдЬреЗрдВ",
          deleteAccountBtn: "рдЦрд╛рддрд╛ рд╣рдЯрд╛рдПрдВ",
          historyTitle: "рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдЗрддрд┐рд╣рд╛рд╕",
          noHistory: "рдХреЛрдИ рдЗрддрд┐рд╣рд╛рд╕ рдЙрдкрд▓рдмреНрдз рдирд╣реАрдВ рд╣реИред рдкреМрдзреЛрдВ рдХрд╛ рд╡рд┐рд╢реНрд▓реЗрд╖рдг рд╢реБрд░реВ рдХрд░реЗрдВ!",
          settingsTitle: "рд╕реЗрдЯрд┐рдВрдЧреНрд╕",
          notificationsLabel: "рд╕реВрдЪрдирд╛рдПрдВ",
          notificationsDesc: "рдЕрдкрдбреЗрдЯ рдФрд░ рдЕрд▓рд░реНрдЯ рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ",
          languageLabel: "рднрд╛рд╖рд╛",
          languageDesc: "рдЕрдкрдиреА рдкрд╕рдВрджреАрджрд╛ рднрд╛рд╖рд╛ рдЪреБрдиреЗрдВ",
          passwordMismatch: "рдкрд╛рд╕рд╡рд░реНрдб рдореЗрд▓ рдирд╣реАрдВ рдЦрд╛рддреЗ!",
          emailExists: "рдИрдореЗрд▓ рдкрд╣рд▓реЗ рд╕реЗ рдкрдВрдЬреАрдХреГрдд рд╣реИ!",
          registrationSuccess: "рдкрдВрдЬреАрдХрд░рдг рд╕рдлрд▓! рдХреГрдкрдпрд╛ рд▓реЙрдЧрд┐рди рдХрд░реЗрдВред",
          invalidCredentials: "рдЕрдорд╛рдиреНрдп рдИрдореЗрд▓ рдпрд╛ рдкрд╛рд╕рд╡рд░реНрдб!",
          verificationSent: "рд╕рддреНрдпрд╛рдкрди рдХреЛрдб рднреЗрдЬрд╛ рдЧрдпрд╛",
          emailNotFound: "рдИрдореЗрд▓ рдирд╣реАрдВ рдорд┐рд▓рд╛!",
          accountSaved: "рдЦрд╛рддрд╛ рд╡рд┐рд╡рд░рдг рд╕рдлрд▓рддрд╛рдкреВрд░реНрд╡рдХ рд╕рд╣реЗрдЬрд╛ рдЧрдпрд╛!",
          deleteConfirm:
            "рдХреНрдпрд╛ рдЖрдк рд╡рд╛рдХрдИ рдЕрдкрдирд╛ рдЦрд╛рддрд╛ рд╣рдЯрд╛рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ? рдЗрд╕ рдХреНрд░рд┐рдпрд╛ рдХреЛ рдкреВрд░реНрд╡рд╡рдд рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ред",
          accountDeleted: "рдЦрд╛рддрд╛ рд╕рдлрд▓рддрд╛рдкреВрд░реНрд╡рдХ рд╣рдЯрд╛рдпрд╛ рдЧрдпрд╛!",
        },
      };

      // Current language
      let currentLanguage = localStorage.getItem("appLanguage") || "en";

      // Data Management
      let users = JSON.parse(localStorage.getItem("users") || "[]");
      let currentUser = JSON.parse(
        sessionStorage.getItem("currentUser") || "null"
      );
      let analyses = JSON.parse(localStorage.getItem("analyses") || "[]");

      // Initialize app
      if (currentUser) {
        showHomePage();
        loadUserData();
      }

      // Apply saved language on load
      applyLanguage(currentLanguage);

      // Toggle password visibility
      function togglePassword(inputId) {
        const input = document.getElementById(inputId);
        const icon = input.nextElementSibling;
        if (input.type === "password") {
          input.type = "text";
          icon.textContent = "ЁЯЩИ";
        } else {
          input.type = "password";
          icon.textContent = "ЁЯСБя╕П";
        }
      }

      // Navigation functions
      function showLogin() {
        document.getElementById("loginPage").classList.remove("hidden");
        document.getElementById("registerPage").classList.add("hidden");
        document.getElementById("forgotPasswordPage").classList.add("hidden");
      }

      function showRegister() {
        document.getElementById("loginPage").classList.add("hidden");
        document.getElementById("registerPage").classList.remove("hidden");
        document.getElementById("forgotPasswordPage").classList.add("hidden");
      }

      function showForgotPassword() {
        document.getElementById("loginPage").classList.add("hidden");
        document.getElementById("registerPage").classList.add("hidden");
        document
          .getElementById("forgotPasswordPage")
          .classList.remove("hidden");
      }

      function showHomePage() {
        document.getElementById("loginPage").classList.add("hidden");
        document.getElementById("registerPage").classList.add("hidden");
        document.getElementById("forgotPasswordPage").classList.add("hidden");
        document.getElementById("homePage").classList.remove("hidden");
      }

      function showSection(section) {
        document
          .querySelectorAll(".nav-link")
          .forEach((link) => link.classList.remove("active"));
        event.target.classList.add("active");

        document.getElementById("homeSection").classList.add("hidden");
        document.getElementById("dashboardSection").classList.add("hidden");
        document.getElementById("historySection").classList.add("hidden");
        document.getElementById("settingsSection").classList.add("hidden");

        document.getElementById(section + "Section").classList.remove("hidden");
      }

      // Language Functions
      function applyLanguage(lang) {
        currentLanguage = lang;
        const trans = translations[lang];

        // Update all elements with data-lang attribute
        document.querySelectorAll("[data-lang]").forEach((element) => {
          const key = element.getAttribute("data-lang");
          if (trans[key]) {
            element.textContent = trans[key];
          }
        });

        // Update placeholders
        document
          .querySelectorAll("[data-lang-placeholder]")
          .forEach((element) => {
            const key = element.getAttribute("data-lang-placeholder");
            if (trans[key]) {
              element.placeholder = trans[key];
            }
          });

        // Update language select in settings
        if (document.getElementById("languageSelect")) {
          document.getElementById("languageSelect").value = lang;
        }

        // Save language preference
        localStorage.setItem("appLanguage", lang);
      }

      function changeLanguage() {
        const lang = document.getElementById("languageSelect").value;
        applyLanguage(lang);

        // Update user settings
        if (currentUser) {
          if (!currentUser.settings) {
            currentUser.settings = {};
          }
          currentUser.settings.language = lang;

          const userIndex = users.findIndex((u) => u.id === currentUser.id);
          if (userIndex !== -1) {
            users[userIndex] = currentUser;
            localStorage.setItem("users", JSON.stringify(users));
            sessionStorage.setItem("currentUser", JSON.stringify(currentUser));
          }
        }
      }

      // Login form
      document
        .getElementById("loginForm")
        .addEventListener("submit", function (e) {
          e.preventDefault();
          const email = document.getElementById("loginEmail").value;
          const password = document.getElementById("loginPassword").value;

          const user = users.find(
            (u) => u.email === email && u.password === password
          );

          if (user) {
            currentUser = user;
            sessionStorage.setItem("currentUser", JSON.stringify(currentUser));

            // Apply user's saved language
            if (user.settings && user.settings.language) {
              applyLanguage(user.settings.language);
            }

            showHomePage();
            loadUserData();
          } else {
            alert(translations[currentLanguage].invalidCredentials);
          }
        });

      // Register form
      document
        .getElementById("registerForm")
        .addEventListener("submit", function (e) {
          e.preventDefault();
          const name = document.getElementById("registerName").value;
          const email = document.getElementById("registerEmail").value;
          const password = document.getElementById("registerPassword").value;
          const confirmPassword = document.getElementById(
            "registerConfirmPassword"
          ).value;

          if (password !== confirmPassword) {
            alert(translations[currentLanguage].passwordMismatch);
            return;
          }

          if (users.find((u) => u.email === email)) {
            alert(translations[currentLanguage].emailExists);
            return;
          }

          const newUser = {
            id: Date.now(),
            name: name,
            email: email,
            password: password,
            phone: "",
            dob: "",
            dateJoined: new Date().toLocaleDateString(),
            settings: {
              notifications: true,
              language: currentLanguage,
            },
          };

          users.push(newUser);
          localStorage.setItem("users", JSON.stringify(users));

          alert(translations[currentLanguage].registrationSuccess);
          showLogin();
        });

      // Forgot password form
      document
        .getElementById("forgotPasswordForm")
        .addEventListener("submit", function (e) {
          e.preventDefault();
          const email = document.getElementById("forgotEmail").value;

          const user = users.find((u) => u.email === email);
          if (user) {
            alert(
              translations[currentLanguage].verificationSent +
                " " +
                email +
                "\n(" +
                user.password +
                ")"
            );
          } else {
            alert(translations[currentLanguage].emailNotFound);
          }
        });

      // Load user data
      function loadUserData() {
        document.getElementById("accountName").textContent = currentUser.name;
        document.getElementById("accountEmail").textContent = currentUser.email;
        document.getElementById("accountPhone").value = currentUser.phone || "";
        document.getElementById("accountDob").value = currentUser.dob || "";
        document.getElementById("dateJoined").textContent =
          currentUser.dateJoined;

        document.getElementById("notificationToggle").checked =
          currentUser.settings?.notifications ?? true;

        if (currentUser.settings && currentUser.settings.language) {
          applyLanguage(currentUser.settings.language);
        }

        updateHistory();
        updateImageCount();
      }

      // File upload handling
      function handleFileSelect(event) {
        const file = event.target.files[0];
        if (file) {
          const reader = new FileReader();
          reader.onload = function (e) {
            document.getElementById("imagePreview").src = e.target.result;
            document.getElementById("imagePreview").style.display = "block";
            document.getElementById("analyzeBtn").style.display = "block";
            document.getElementById("resultBox").style.display = "none";
          };
          reader.readAsDataURL(file);
        }
      }

      // Analyze plant
      function analyzePlant() {
        document.getElementById("analyzeBtn").style.display = "none";
        document.getElementById("loader").style.display = "flex";
        document.getElementById("resultBox").style.display = "none";

        // Simulate API processing
        setTimeout(() => {
          const plants = {
            en: [
              {
                name: "Rose Plant",
                scientific: "Rosa rugosa",
                desc: "A beautiful flowering plant commonly found in gardens.",
              },
              {
                name: "Tulsi (Holy Basil)",
                scientific: "Ocimum tenuiflorum",
                desc: "A sacred plant in Hindu culture with medicinal properties.",
              },
              {
                name: "Money Plant",
                scientific: "Epipremnum aureum",
                desc: "A popular indoor plant known for air purification.",
              },
              {
                name: "Aloe Vera",
                scientific: "Aloe barbadensis",
                desc: "A succulent plant with numerous medicinal uses.",
              },
              {
                name: "Snake Plant",
                scientific: "Sansevieria trifasciata",
                desc: "A hardy indoor plant that purifies air.",
              },
            ],
            ta: [
              {
                name: "ро░рпЛроЬро╛ роЪрпЖроЯро┐",
                scientific: "Rosa rugosa",
                desc: "родрпЛроЯрпНроЯроЩрпНроХро│ро┐ро▓рпН рокрпКродрпБро╡ро╛роХроХрпН роХро╛рогрокрпНрокроЯрпБроорпН роЕро┤роХро╛рой рокрпВроХрпНроХрпБроорпН роЪрпЖроЯро┐.",
              },
              {
                name: "родрпБро│роЪро┐",
                scientific: "Ocimum tenuiflorum",
                desc: "роЗроирпНродрпБ роХро▓ро╛роЪрпНроЪро╛ро░родрпНродро┐ро▓рпН рооро░рпБродрпНродрпБро╡ рокрогрпНрокрпБроХро│рпИроХрпН роХрпКрогрпНроЯ рокрпБройро┐род роЪрпЖроЯро┐.",
              },
              {
                name: "рокрогроорпН роЪрпЖроЯро┐",
                scientific: "Epipremnum aureum",
                desc: "роХро╛ро▒рпНро▒рпБ роЪрпБродрпНродро┐роХро░ро┐рокрпНрокрпБроХрпНроХро╛роХ роЕро▒ро┐ропрокрпНрокроЯрпБроорпН рокро┐ро░рокро▓рооро╛рой роЙроЯрпНрокрпБро▒ роЪрпЖроЯро┐.",
              },
              {
                name: "роХро▒рпНро▒ро╛ро┤рпИ",
                scientific: "Aloe barbadensis",
                desc: "рокро▓ рооро░рпБродрпНродрпБро╡ рокропройрпНрокро╛роЯрпБроХро│рпИроХрпН роХрпКрогрпНроЯ роТро░рпБ роЪродрпИрокрпНрокро▒рпНро▒рпБро│рпНро│ роЪрпЖроЯро┐.",
              },
              {
                name: "рокро╛роорпНрокрпБ роЪрпЖроЯро┐",
                scientific: "Sansevieria trifasciata",
                desc: "роХро╛ро▒рпНро▒рпИ роЪрпБродрпНродро┐роХро░ро┐роХрпНроХрпБроорпН роХроЯро┐ройрооро╛рой роЙроЯрпНрокрпБро▒ роЪрпЖроЯро┐.",
              },
            ],
            hi: [
              {
                name: "рдЧреБрд▓рд╛рдм рдХрд╛ рдкреМрдзрд╛",
                scientific: "Rosa rugosa",
                desc: "рдмрдЧреАрдЪреЛрдВ рдореЗрдВ рдЖрдорддреМрд░ рдкрд░ рдкрд╛рдпрд╛ рдЬрд╛рдиреЗ рд╡рд╛рд▓рд╛ рдПрдХ рд╕реБрдВрджрд░ рдлреВрд▓ рд╡рд╛рд▓рд╛ рдкреМрдзрд╛ред",
              },
              {
                name: "рддреБрд▓рд╕реА",
                scientific: "Ocimum tenuiflorum",
                desc: "рд╣рд┐рдВрджреВ рд╕рдВрд╕реНрдХреГрддрд┐ рдореЗрдВ рдФрд╖рдзреАрдп рдЧреБрдгреЛрдВ рд╡рд╛рд▓рд╛ рдПрдХ рдкрд╡рд┐рддреНрд░ рдкреМрдзрд╛ред",
              },
              {
                name: "рдордиреА рдкреНрд▓рд╛рдВрдЯ",
                scientific: "Epipremnum aureum",
                desc: "рд╡рд╛рдпреБ рд╢реБрджреНрдзрд┐рдХрд░рдг рдХреЗ рд▓рд┐рдП рдЬрд╛рдирд╛ рдЬрд╛рдиреЗ рд╡рд╛рд▓рд╛ рдПрдХ рд▓реЛрдХрдкреНрд░рд┐рдп рдЗрдирдбреЛрд░ рдкреМрдзрд╛ред",
              },
              {
                name: "рдПрд▓реЛрд╡реЗрд░рд╛",
                scientific: "Aloe barbadensis",
                desc: "рдХрдИ рдФрд╖рдзреАрдп рдЙрдкрдпреЛрдЧреЛрдВ рд╡рд╛рд▓рд╛ рдПрдХ рд░рд╕реАрд▓рд╛ рдкреМрдзрд╛ред",
              },
              {
                name: "рд╕реНрдиреЗрдХ рдкреНрд▓рд╛рдВрдЯ",
                scientific: "Sansevieria trifasciata",
                desc: "рдПрдХ рдордЬрдмреВрдд рдЗрдирдбреЛрд░ рдкреМрдзрд╛ рдЬреЛ рд╣рд╡рд╛ рдХреЛ рд╢реБрджреНрдз рдХрд░рддрд╛ рд╣реИред",
              },
            ],
          };

          const plantList = plants[currentLanguage] || plants.en;
          const randomPlant =
            plantList[Math.floor(Math.random() * plantList.length)];
          const confidence = (85 + Math.random() * 14).toFixed(1);

          document.getElementById("plantName").textContent = randomPlant.name;
          document.getElementById("scientificName").textContent =
            randomPlant.scientific;
          document.getElementById("confidence").textContent = confidence + "%";
          document.getElementById("description").textContent = randomPlant.desc;

          // Save analysis
          const analysis = {
            id: Date.now(),
            userId: currentUser.id,
            image: document.getElementById("imagePreview").src,
            plantName: randomPlant.name,
            scientificName: randomPlant.scientific,
            confidence: confidence,
            description: randomPlant.desc,
            date: new Date().toLocaleDateString(),
            timestamp: Date.now(),
          };

          analyses.push(analysis);
          localStorage.setItem("analyses", JSON.stringify(analyses));

          document.getElementById("loader").style.display = "none";
          document.getElementById("resultBox").style.display = "block";

          updateHistory();
          updateImageCount();
        }, 3000);
      }

      // Update history
      function updateHistory() {
        const userAnalyses = analyses.filter(
          (a) => a.userId === currentUser.id
        );
        const historyList = document.getElementById("historyList");

        if (userAnalyses.length > 0) {
          historyList.innerHTML = userAnalyses
            .sort((a, b) => b.timestamp - a.timestamp)
            .map(
              (item) => `
                    <div class="history-item">
                        <img src="${item.image}" class="history-image" alt="Plant">
                        <div style="flex: 1;">
                            <strong>${item.plantName}</strong>
                            <p style="color: #7f8c8d; margin-top: 5px; font-size: 14px;">${item.date}</p>
                        </div>
                        <span style="color: var(--primary); font-weight: 600;">${item.confidence}%</span>
                    </div>
                `
            )
            .join("");
        } else {
          historyList.innerHTML = `<p style="text-align: center; color: #7f8c8d;" data-lang="noHistory">${translations[currentLanguage].noHistory}</p>`;
        }
      }

      // Update image count
      function updateImageCount() {
        const userAnalyses = analyses.filter(
          (a) => a.userId === currentUser.id
        );
        document.getElementById("imageCount").textContent = userAnalyses.length;
      }

      // Save account details
      function saveAccountDetails() {
        currentUser.phone = document.getElementById("accountPhone").value;
        currentUser.dob = document.getElementById("accountDob").value;

        const userIndex = users.findIndex((u) => u.id === currentUser.id);
        if (userIndex !== -1) {
          users[userIndex] = currentUser;
          localStorage.setItem("users", JSON.stringify(users));
          sessionStorage.setItem("currentUser", JSON.stringify(currentUser));
          alert(translations[currentLanguage].accountSaved);
        }
      }

      // Save settings
      function saveSettings() {
        if (!currentUser.settings) {
          currentUser.settings = {};
        }
        currentUser.settings.notifications =
          document.getElementById("notificationToggle").checked;

        const userIndex = users.findIndex((u) => u.id === currentUser.id);
        if (userIndex !== -1) {
          users[userIndex] = currentUser;
          localStorage.setItem("users", JSON.stringify(users));
          sessionStorage.setItem("currentUser", JSON.stringify(currentUser));
        }
      }

      // Delete account
      function deleteAccount() {
        if (confirm(translations[currentLanguage].deleteConfirm)) {
          users = users.filter((u) => u.id !== currentUser.id);
          localStorage.setItem("users", JSON.stringify(users));

          analyses = analyses.filter((a) => a.userId !== currentUser.id);
          localStorage.setItem("analyses", JSON.stringify(analyses));

          logout();
          alert(translations[currentLanguage].accountDeleted);
        }
      }

      // Logout
      function logout() {
        currentUser = null;
        sessionStorage.removeItem("currentUser");
        document.getElementById("homePage").classList.add("hidden");
        showLogin();
        document.getElementById("loginForm").reset();

        document.getElementById("imagePreview").style.display = "none";
        document.getElementById("analyzeBtn").style.display = "none";
        document.getElementById("resultBox").style.display = "none";
      }

      // Drag and drop support
      const uploadBox = document.querySelector(".upload-box");

      if (uploadBox) {
        uploadBox.addEventListener("dragover", (e) => {
          e.preventDefault();
          uploadBox.style.background = "#f0fdf4";
        });

        uploadBox.addEventListener("dragleave", () => {
          uploadBox.style.background = "";
        });

        uploadBox.addEventListener("drop", (e) => {
          e.preventDefault();
          uploadBox.style.background = "";

          const file = e.dataTransfer.files[0];
          if (file && file.type.startsWith("image/")) {
            const reader = new FileReader();
            reader.onload = function (event) {
              document.getElementById("imagePreview").src = event.target.result;
              document.getElementById("imagePreview").style.display = "block";
              document.getElementById("analyzeBtn").style.display = "block";
              document.getElementById("resultBox").style.display = "none";
            };
            reader.readAsDataURL(file);
          }
        });
      }
    </script>
  </body>
</html>
